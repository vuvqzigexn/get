$(document).on("turbolinks:load",function(){function t(t,n){$("#modal-title")[0].innerHTML=t,$("#modal-body")[0].innerHTML=n,$("#myModal").modal({show:"true"})}function n(){var t=$(".item-card-quantity"),n=0;for(i=0;i<t.length;i++)n+=t[i].value*$("#price"+t[i].dataset.id).val();0==n&&($("#ckbtn").remove(),$(".cart-items").append("<h3>Gi\u1ecf tr\u1ed1ng</h3>")),$(".totalFormat")[0].innerHTML="$"+n/100}function e(n,i){$.ajax({url:"/update-item-quantity",type:"PUT",data:{id:n,quantity:i},success:function(n){if(n.error)return t("Th\xf4ng b\xe1o",n.result)}})}$(".buynow").click(function(){var n=this.id.split("-")[1],i={id:n,quantity:parseInt($("#quantity-"+n)[0].value)};$.post("/add-to-cart",i,function(n){return n.err?t("Th\xf4ng b\xe1o",n.result):($(".items-count")[0].innerHTML=Object.keys(n.result).length,void t("Th\xf4ng b\xe1o","S\u1ea3n ph\u1ea9m \u0111\xe3 \u0111\u01b0\u1ee3c th\xeam v\xe0o gi\u1ecf h\xe0ng!"))})}),$(".item-card-quantity").on("click or change",function(){n(),e(this.dataset.id,this.value)}),$(".remove-item").click(function(){var i=this.id.replace("rm","");$.ajax({url:"/remove-item",type:"PUT",data:{id:i},success:function(e){e.error||($(".items-count")[0].innerHTML=$(".item-card-quantity").length,$("#"+i).remove(),n(),t("Th\xf4ng b\xe1o","\u0110\xe3 x\xf3a s\u1ea3n ph\u1ea9m kh\u1ecfi gi\u1ecf"))}})}),$(".changes-status").on("change",function(){var n=this.id.replace("status_","");$.ajax({url:"/admin/change-status",type:"PUT",data:{id:n,status_id:this.value},success:function(n){if(n.error)return t("Th\xf4ng b\xe1o",n.result)}})})});